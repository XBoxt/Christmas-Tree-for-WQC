<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For WQC | Eternal Edition</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "three": "https://esm.sh/three@0.160.0",
            "@react-three/fiber": "https://esm.sh/@react-three/fiber@8.15.12?external=react,react-dom,three",
            "@react-three/drei": "https://esm.sh/@react-three/drei@9.96.1?external=react,react-dom,three,@react-three/fiber",
            "@react-three/postprocessing": "https://esm.sh/@react-three/postprocessing@2.16.0?external=react,react-dom,three,@react-three/fiber",
            "uuid": "https://esm.sh/uuid@9.0.1"
        }
    }
    </script>
</head>
<body>
    <div id="loader">
        <div class="loading-text">INITIALIZING SYSTEM...</div>
    </div>

    <div id="ui-layer">
        <div class="header">
            <h1>TO WQC</h1>
            <div class="sub-text">MERRY CHRISTMAS Â· ETERNAL EDITION</div>
        </div>
        
        <div class="actions">
            <div class="btn" onclick="startExperience()">â–¶ PLAY MUSIC</div>
            <div class="btn" onclick="window.randomizeColors()">ğŸ¨ REMIX</div>
            <div class="btn" onclick="window.toggleShape()">âœ¨ MORPH</div>
            <div class="btn" onclick="takeSnapshot()">ğŸ“· SNAP</div>
        </div>
    </div>
    
    <div id="canvas-container">
        <div id="canvas-root" style="width:100%;height:100%"></div>
    </div>

    <script>
        function startExperience() {
            if(window.startShow) window.startShow();
            // éšè— Play æŒ‰é’®é˜²æ­¢é‡å¤ç‚¹å‡»
            event.target.style.display = 'none';
        }

        function takeSnapshot() {
            const canvas = document.querySelector('canvas');
            if (canvas) {
                const link = document.createElement('a');
                link.download = 'WQC-Christmas-Memory.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            }
        }
    </script>
    <script type="text/babel" data-type="module" src="app.js"></script>
</body>
</html>